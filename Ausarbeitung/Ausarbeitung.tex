\documentclass{article}

%\usepackage[utf8]{inputenc}		% LuaTex do not need this
%\usepackage[T1]{fontenc}			% LuaTex do not need this
\usepackage{fontspec}					% LuaTex need this
\usepackage{lmodern}
\usepackage{comment}
%\usepackage[ngerman]{babel}		% LuaTex do not need this
\usepackage{polyglossia}
	\setdefaultlanguage[spelling=new]{german}

\usepackage{float}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% LATEX Mathematical Symbols
% https://reu.dimacs.rutgers.edu/Symbols.pdf
% https://en.wikibooks.org/wiki/LaTeX/Mathematics
%
\usepackage{amssymb}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% algorithm2e.sty — package for algorithms
% http://ctan.mirrors.hoobly.com/macros/latex/contrib/algorithm2e/doc/algorithm2e.pdf
%
\usepackage[
	ngerman,
	linesnumbered,
	boxed,
%	algochapter,
%	rightnl,
%	figure,
]{algorithm2e}
	% Then you can adjust the spacing between the body of the algorithm and its
	% caption through the command \SetAlCapSkip.
	\SetAlCapSkip{1em}
	% Restyling the caption in an algorithm created with algorithm2e
	% https://tex.stackexchange.com/questions/112294/restyling-the-caption-in-an-algorithm-created-with-algorithm2e/112295
	\SetAlgoCaptionSeparator{:}
	\renewcommand\AlCapFnt{\normalfont}
	% Algorithm2e modify line numbers
	% https://tex.stackexchange.com/questions/100145/algorithm2e-modify-line-numbers
	\SetNlSty{textbf}{}{:}
	% Sets the value of the space between the line numbers and the text, by default 1em.
	\SetNlSkip{2em}
	%\SetAlgoRefName{QXY}
	

\usepackage{tikz}
\usepackage{verbatim}
\usetikzlibrary{arrows,shapes}

\usepackage[vario]{fancyref}
	

\title{Hamiltonsche Grafen und das TSP}
\author{
  Albert Kasdorf\and
  Andreas Janster\and
  Alex Bibanaev\and
  Georg Braun\and
  Rati Devdariani}

\date{09.05.2018}

\begin{document}
\tikzstyle{vertex}=[circle,fill=black!25,minimum size=15pt,inner sep=0pt]
\tikzstyle{selected vertex} = [vertex, fill=red!24]
\tikzstyle{edge} = [draw,thick,-]
\tikzstyle{weight} = [font=\small]
\tikzstyle{selected edge} = [draw,line width=5pt,-,red!50]
\tikzstyle{ignored edge} = [draw,line width=5pt,-,black!20]
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\maketitle

\section{Algorithmen}

\subsection{Doppelter-Baum-Algorithmus}
Bevor eine Beschreibung des Doppelten-Baum-Algorithmus erfolgt, wird zunächst noch der Begriff der Dreieckungleichung eingeführt. Dabei gilt es zu beachten, dass es sich nicht um die Dreiecksungleichung aus der Geometrie handelt. Für Grafen ist diese wie folgt definiert.
Die Dreiecksungleichung garantiert bei einem vollständigen Grafen, dass für alle Knoten u,v und w gilt:
\begin{displaymath}
c(u,v) \leq c(u,w) + c(w,v)
\end{displaymath}
Im Kern sagt dies aus, dass der direkte Weg von einem Knoten u nach v kürzer ist, als der Umweg über einen zusätzlichen Knoten w.

% Hier noch einen fancy Graf machen


Der Doppelte-Baum Algorithmus von Rosenkranz, Stearns und Lewis aus dem Jahr 1977 berechnet einen Hamilton-Kreis. Zunächst wird der Algorithmus formal beschrieben und anschließend anhand eines Beispiels illustriert. Abschließend wird noch bewiesen warum dieser Algorithmus eine Tour liefert.

Der Algorithmus sieht wie folgt aus:

\begin{algorithm}
\KwIn{Ein vollständiger Graf $K_n$ mit Kantengewichten $ c(e) $ welche die Dreiecksungleichung erfüllen}
\KwOut{Ein Hamilton-Kreis}
\SetKwInOut{Parameter}{Schritt 1:}
\Parameter{Konstruiere einen minimal spannenden Baum $T$ von $K_n$.}
\SetKwInOut{Parameter}{Schritt 2:}
\Parameter{Verdopple alle Kanten von $T$ (daraus resultiert ein eulersche Graf $T_d$.}
\SetKwInOut{Parameter}{Schritt 3:}
\Parameter{Berechne die Euler-Tour in $T_d$.}
\SetKwInOut{Parameter}{Schritt 4:}
\Parameter{Durchlaufe die Euler Tour von einem Startknoten aus. Falls dabei ein Knoten schon besucht wurde, nehme die Abkürzung zum nächsten unbesuchten Knoten auf der Tour.}
\caption{Doppelter-Baum-Algorithmus}
\end{algorithm}

Um ein besseres Verständnis für den Algorithmus zu bekommen wird dieser nun anhand eines Beispiels illustriert. Die Knoten des Ursprungsgrafen sind in \Fref{fig:ursprungs-graf-blank} dargestellt. Im Zuge der Übersichtlichkeit sind die Kanten und Kantengewichte des zusammenhängenden Grafen nicht mit eingezeichnet.
\begin{figure}[H]
\centering
\begin{tikzpicture}[scale=0.8]
    % Draw a 7,11 network
    % First we draw the vertices
    \foreach \pos/\name in {{(0,0)/a}, {(0,-2)/b}, {(0,-4)/c},
                            {(-3,-1)/d}, {(-5,-3)/e}, {(-4,2)/f}, {(3,1)/g}, {(3,-1)/h}}
        \node[vertex] (\name) at \pos {};   
\end{tikzpicture}
\caption{Knoten des Ursprungsgrafen}
\label{fig:ursprungs-graf-blank}
\end{figure}
Der erste Schritt des Algorithmus erfordert die Konstruktion eines minimal spannenden Baumes $T$. Dieser ist in \Fref{fig:ursprungs-graf-mst} dargestellt.
\begin{figure}[H]
\centering
\begin{tikzpicture}[scale=0.8, auto,swap]
    % Draw a 7,11 network
    % First we draw the vertices
    \foreach \pos/\name in {{(0,0)/a}, {(0,-2)/b}, {(0,-4)/c},
                            {(-3,-1)/d}, {(-5,-3)/e}, {(-4,2)/f}, {(3,1)/g}, {(3,-1)/h}}
        \node[vertex] (\name) at \pos {$\name$};
    % Connect vertices with edges and draw weights
    \foreach \source/ \dest /\weight in {b/a/0, c/b/0, b/d/0, d/e/0, d/f/0, b/h/0, h/g/0}
        \path[edge] (\source) -- node[weight] {} (\dest);
\end{tikzpicture}
\caption{Minimal spannender Baum}
\label{fig:ursprungs-graf-mst}
\end{figure}
In Schritt Zwei werden die Kanten aus dem minimal spannenden Baum $T$ verdoppelt, sodass ein eulerscher Graf $T_d$ entsteht. In diesem Graf wird wie in Schritt Drei gefordert eine Euler-Tour konstruiert. In \Fref{fig:ursprungs-graf-eulertour} ist diese beispielhaft eingezeichnet.
\begin{figure}[H]
\centering
\begin{tikzpicture}[scale=0.8, auto,swap]
    % Draw a 7,11 network
    % First we draw the vertices
    \foreach \pos/\name in {{(0,0)/a}, {(0,-2)/b}, {(0,-4)/c},
                            {(-3,-1)/d}, {(-5,-3)/e}, {(-4,2)/f}, {(3,1)/g}, {(3,-1)/h}}
        \node[vertex] (\name) at \pos {$\name$};
    % Connect vertices with edges and draw weights	
\draw [edge, bend angle=-20, bend left, ->] (c) to node[]{1} (b);		
\draw [edge, bend angle=-20, bend left, ->] (b) to node[]{2} (a);			
\draw [edge, bend angle=-20, bend left, ->] (a) to node[]{3} (b);			
\draw [edge, bend angle=-20, bend left, ->] (b) to node[]{4} (d);			
\draw [edge, bend angle=-20, bend left, ->] (d) to node[]{5} (e);			
\draw [edge, bend angle=-20, bend left, ->] (e) to node[]{6} (d);			
\draw [edge, bend angle=-20, bend left, ->] (d) to node[]{7} (f);			
\draw [edge, bend angle=-20, bend left, ->] (f) to node[]{8} (d);		
\draw [edge, bend angle=-20, bend left, ->] (d) to node[]{9} (b);			
\draw [edge, bend angle=-20, bend left, ->] (b) to node[]{10} (h);			
\draw [edge, bend angle=-20, bend left, ->] (h) to node[]{11} (g);			
\draw [edge, bend angle=-20, bend left, ->] (g) to node[]{12} (h);			
\draw [edge, bend angle=-20, bend left, ->] (h) to node[]{13} (b);	
\draw [edge, bend angle=-20, bend left, ->] (b) to node[]{14} (c);	
\end{tikzpicture}
\caption{Euler-Tour}
\label{fig:ursprungs-graf-eulertour}
\end{figure}
Im letzten Schritt des Algorithmus wird die Euler-Tour vom Startknoten aus durchlaufen. Dabei wird versucht immer den kürzesten Weg zu nutzen welcher laut Dreiecksungleichung der direkte Weg ist. Bei der Betrachtung des Grafen muss daran gedacht werden, dass dieser immer noch ein zusammenhängender  Graf ist. Eine beispielhafte Tour wird anhand der \Fref{fig:ursprungs-graf-hamiltonkreis} und dem Startpunkt c entwickelt. Von $c$ beginnend geht die Euler-Tour zu $b$ und dann wiederum zu $a$. Bei einem Versuch der Euler-Tour weiter zu folgen würde man feststellen, dass $b$ bereits besucht wurde. Deshalb wird der direkte Weg zu $d$ genommen. Von dort aus wird wieder der Euler-Tour zu $e$ gefolgt. Auch dort ist die Rückkehr zu $d$ nicht mehr möglich, sodass die direkte Verbindung zu $f$ gewählt wird. Von dort aus kann auch nicht die Euler-Tour weiter verfolgt werden, da $d$ bereits besucht wurde. Deshalb wird die direkte Kante zu $h$ gewählt. Dort geht es wieder entlang der Euler-Tour zum Knoten $g$. Die direkte Verbindung zu $c$ ist die letzte Kante welche genommen wird um den Hamilton-Kreis zu komplettieren.
\begin{figure}[H]
\centering
\begin{tikzpicture}[scale=0.8, auto,swap]
    % Draw a 7,11 network
    % First we draw the vertices
    \foreach \pos/\name in {{(0,0)/a}, {(0,-2)/b}, {(0,-4)/c},
                            {(-3,-1)/d}, {(-5,-3)/e}, {(-4,2)/f}, {(3,1)/g}, {(3,-1)/h}}
        \node[vertex] (\name) at \pos {$\name$};
    % Connect vertices with edges and draw weights	
\draw [edge, ->] (c) to node[]{} (b);
\draw [edge, ->] (b) to node[]{} (a);
\draw [edge, ->] (a) to node[]{} (d);
\draw [edge, ->] (d) to node[]{} (e);
\draw [edge, ->] (e) to node[]{} (f);
\draw [edge, ->] (f) to node[]{} (h);
\draw [edge, ->] (h) to node[]{} (g);
\draw [edge, ->] (g) to node[]{} (c);
\end{tikzpicture}
\caption{Hamilton-Kreis}
\label{fig:ursprungs-graf-hamiltonkreis}
\end{figure}

Der Doppelter-Baum-Algorithmus liefert zwar einen Hamilton-Kreis, jedoch ist dieser nicht optimal. Aber es lässt sich trotzdem eine obere Grenze der Abweichung zum Optimum bestimmen. Die durch den Algorithmus bestimmte Tour ist maximal doppelt so lang wie eine optimale Tour. Formal lässt es sich wie folgt ausdrücken:
\textit{$K_n$ sei ein vollständiger Graf mit positiven Kantengewichten welche die Dreiecksungleichung erfüllen. Dann sei $T'$ das Ergebnis des Doppelten-Baum-Algorithmus und $OPT$ eine optimale Lösung. Dann gilt
\begin{displaymath}
c(T') \leq 2 * c(OPT)
\end{displaymath}
.}

% Beweis

\end{document}